<%- include('partials/header') %>
<div class="main">
    <% if (isBlog) { %>
        <%- getPosts() %>
    <% } else if (post) { %>
        <h2><%= post.title %></h2>
        <h3><i><%= moment(post.date_posted).format('YYYY-MM-DD') %></i></h3>
        <p><i><%= post.subtitle %></i></p>
        <p><%= post.content %></p>
        <p><a href="/thoughts">< back</a></p>
    <% } else { %>
        <p>post not found</p>
    <% } %>
</div>
<%- include('partials/footer') %>

<%
function getPosts() {
    var postList = "";

    posts.forEach(function (p) {
        var datetime = moment(p.date_posted).format('YYYY-MM-DD')
        postList += "<p><a href='/thoughts/" + p.id + "'>" + p.title + "</a> - " + datetime + "</p>";
    });

    if (postList == "") {
        return "<p>nothing found</p>";
    }

    return postList;
}
%>